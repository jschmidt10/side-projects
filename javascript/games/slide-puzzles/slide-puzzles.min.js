!function(t){var e={};function o(l){if(e[l])return e[l].exports;var n=e[l]={i:l,l:!1,exports:{}};return t[l].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,l){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(l,n,function(e){return t[e]}.bind(null,n));return l},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e){let o={rows:4,cols:4,canvas:{width:400,height:400},blocks:{color:"#3f0202",trim:{color:"white",offsetPercent:.05,lineWidth:2},label:{color:"white",heightOffsetPerfect:.75,smallWidthOffsetPercent:.3,largeWidthOffsetPercent:.08,font:"72px Courier New"}}};function l(t,e){let o=new n(e.rows,e.cols),l=document.getElementById(t),i=l.getContext("2d");function c(){i.clearRect(0,0,e.canvas.width,e.canvas.height);for(let t=0;t<o.blocks.length;t++){let e=o.blocks[t];void 0!==e&&r(e,t)}}function r(t,l){let{x:n,y:c}=o.getCoord(l),r=n*e.blocks.height,s=c*e.blocks.width;i.fillStyle=e.blocks.color,i.fillRect(r,s,e.blocks.width,e.blocks.height),i.strokeStyle=e.blocks.trim.color,i.lineWidth=e.blocks.trim.lineWidth,i.strokeRect(r+e.blocks.trim.dx,s+e.blocks.trim.dy,e.blocks.trim.width,e.blocks.trim.height),i.fillStyle=e.blocks.label.color,i.font=e.blocks.label.font,i.fillText(t,r+e.blocks.label.getDx(t),s+e.blocks.label.dy)}!function(t){t.width=e.canvas.width,t.height=e.canvas.height}(l),function(t){t.blocks.width=t.canvas.width/t.cols,t.blocks.height=t.canvas.height/t.rows,t.blocks.trim.width=t.blocks.width*(1-2*t.blocks.trim.offsetPercent),t.blocks.trim.height=t.blocks.height*(1-2*t.blocks.trim.offsetPercent),t.blocks.trim.dx=t.blocks.width*t.blocks.trim.offsetPercent,t.blocks.trim.dy=t.blocks.height*t.blocks.trim.offsetPercent,t.blocks.label.dy=t.blocks.height*t.blocks.label.heightOffsetPerfect,t.blocks.label.getDx=function(e){return e<10?t.blocks.width*t.blocks.label.smallWidthOffsetPercent:t.blocks.width*t.blocks.label.largeWidthOffsetPercent}}(e),l.addEventListener("click",function(t){let{x:n,y:i}=function(t){return{x:t.pageX-l.offsetLeft,y:t.pageY-l.offsetTop}}(t),r=function(t,o){return o+t*e.cols}(Math.floor(i/e.blocks.height),Math.floor(n/e.blocks.width));o.slide(r),c()}),c()}function n(t,e){function o(t,e,o){let l=t[e];t[e]=t[o],t[o]=l}this.rows=t,this.cols=e,this.blocks=function(t){for(let e=0;e<t.length;e++){let l=Math.floor(Math.random()*t.length);l!==e&&o(t,e,l)}return t}(function(t){let e=new Array(t);for(let o=0;o<t-1;o++)e[o]=o;return e}(t*e)),this.emptyIndex=this.blocks.indexOf(void 0),this.isComplete=function(){if(this.emptyIndex!==this.blocks.length-1)return!1;for(let t=0;t<this.blocks.length-1;t++)if(t!==this.blocks[t])return!1;return!0},this.print=function(){for(let t=0;t<this.blocks.length;t++)console.log(`${t}: ${this.blocks[t]}`)},this.slide=function(t){(function(t,e,o){let{x:l,y:n}=t.getCoord(e),{x:i,y:c}=t.getCoord(o);return Math.abs(l-i)+Math.abs(n-c)<=1})(this,t,this.emptyIndex)&&(o(this.blocks,t,this.emptyIndex),this.emptyIndex=t)},this.getCoord=function(t){return{x:t%this.cols,y:Math.floor(t/this.cols)}}}function i(){new l("game-canvas",o)}document.addEventListener("DOMContentLoaded",function(){document.getElementById("new-puzzle").addEventListener("click",i),i()})}]);