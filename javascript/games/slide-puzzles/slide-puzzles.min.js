!function(t){var e={};function l(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=e,l.d=function(t,e,o){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(o,n,function(e){return t[e]}.bind(null,n));return o},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l(l.s=0)}([function(t,e){let l={rows:4,cols:4,canvas:{width:400,height:400},blocks:{color:"#3f0202",trim:{color:"white",offsetPercent:.05,lineWidth:2},label:{color:"white",heightOffsetPerfect:.75,smallWidthOffsetPercent:.3,largeWidthOffsetPercent:.08,font:"72px Courier New"}}};function o(t,e,l){let o=new n(e.rows,e.cols,l),i=document.getElementById(t),r=i.getContext("2d");function c(){r.clearRect(0,0,e.canvas.width,e.canvas.height);for(let t=0;t<o.blocks.length;t++){let e=o.blocks[t];null!==e&&s(e,t)}}function s(t,l){let{x:n,y:i}=o.getCoord(l),c=n*e.blocks.height,s=i*e.blocks.width;r.fillStyle=e.blocks.color,r.fillRect(c,s,e.blocks.width,e.blocks.height),r.strokeStyle=e.blocks.trim.color,r.lineWidth=e.blocks.trim.lineWidth,r.strokeRect(c+e.blocks.trim.dx,s+e.blocks.trim.dy,e.blocks.trim.width,e.blocks.trim.height),r.fillStyle=e.blocks.label.color,r.font=e.blocks.label.font,r.fillText(t,c+e.blocks.label.getDx(t),s+e.blocks.label.dy)}!function(t){t.width=e.canvas.width,t.height=e.canvas.height}(i),function(t){t.blocks.width=t.canvas.width/t.cols,t.blocks.height=t.canvas.height/t.rows,t.blocks.trim.width=t.blocks.width*(1-2*t.blocks.trim.offsetPercent),t.blocks.trim.height=t.blocks.height*(1-2*t.blocks.trim.offsetPercent),t.blocks.trim.dx=t.blocks.width*t.blocks.trim.offsetPercent,t.blocks.trim.dy=t.blocks.height*t.blocks.trim.offsetPercent,t.blocks.label.dy=t.blocks.height*t.blocks.label.heightOffsetPerfect,t.blocks.label.getDx=function(e){return e<10?t.blocks.width*t.blocks.label.smallWidthOffsetPercent:t.blocks.width*t.blocks.label.largeWidthOffsetPercent}}(e),i.addEventListener("click",function(t){let{x:l,y:n}=function(t){return{x:t.pageX-i.offsetLeft,y:t.pageY-i.offsetTop}}(t),r=function(t,l){return l+t*e.cols}(Math.floor(n/e.blocks.height),Math.floor(l/e.blocks.width));o.slide(r),c()}),c()}function n(t,e,l){function o(t,e,l){let o=t[e];t[e]=t[l],t[l]=o}function n(t){void 0!==typeof Storage&&localStorage.setItem("blocks",JSON.stringify(t))}this.rows=t,this.cols=e,this.blocks=function(t,e,l){let i=t*e;if(void 0!==typeof Storage&&!l)try{let t=JSON.parse(localStorage.getItem("blocks"));if(function(t,e){return null!==t&&t.length===e&&1===t.filter(t=>null===t).length}(t,i))return t}catch(t){localStorage.removeItem("blocks")}let r=function(t){for(let e=0;e<t.length;e++){let l=Math.floor(Math.random()*t.length);l!==e&&o(t,e,l)}return t}(function(t){let e=new Array(t);for(let l=0;l<t-1;l++)e[l]=l;return e[t-1]=null,e}(i));return function(t,e,l){let n=function(t){let e=0;for(let l=0;l<t.length;l++){let o=t[l];if(null!==o)for(let n=l+1;n<t.length;n++)null!==t[n]&&o>t[n]&&(e+=1)}return e}(t),i=t.indexOf(null),r=Math.floor(i/l);if(!function(t,e,l,o){return e%2==1?o%2==0:o%2==1?(t-l)%2==0:(t-l)%2==1}(e,l,r,n))for(let e=0;e<t.length-1;e++)if(null!==t[e]&&null!==t[e+1]&&t[e]>t[e+1]){o(t,e,e+1);break}}(r,t,e),n(r),r}(t,e,l),this.emptyIndex=this.blocks.indexOf(null),this.isComplete=function(){if(this.emptyIndex!==this.blocks.length-1)return!1;for(let t=0;t<this.blocks.length-1;t++)if(t!==this.blocks[t])return!1;return!0},this.print=function(){for(let t=0;t<this.blocks.length;t++)console.log(`${t}: ${this.blocks[t]}`)},this.slide=function(t){(function(t,e,l){let{x:o,y:n}=t.getCoord(e),{x:i,y:r}=t.getCoord(l);return Math.abs(o-i)+Math.abs(n-r)<=1})(this,t,this.emptyIndex)&&(o(this.blocks,t,this.emptyIndex),this.emptyIndex=t,n(this.blocks))},this.getCoord=function(t){return{x:t%this.cols,y:Math.floor(t/this.cols)}}}function i(t){new o("game-canvas",l,t)}document.addEventListener("DOMContentLoaded",function(){document.getElementById("new-puzzle").addEventListener("click",t=>i(!0)),i(!1)})}]);